language: cpp

sudo: false

matrix:
  include:
    - os: linux
      compiler: gcc-5
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['g++-5']
      env: [CC_COMPILER=gcc-5, CXX_COMPILER=g++-5]
    - os: linux
      compiler: clang-3.7
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test', 'llvm-toolchain-precise-3.7']
          packages: ['g++-5', 'clang-3.7']
      env: [CC_COMPILER=clang-3.7, CXX_COMPILER=clang++-3.7]

before_script:
  - wget --no-check-certificate https://cmake.org/files/v3.5/cmake-3.5.2-Linux-x86_64.sh
  - sh cmake-3.5.2-Linux-x86_64.sh --exclude-subdir --prefix=$HOME

script:
  - mkdir -p build && cd build
  - CC=$CC_COMPILER CXX=$CXX_COMPILER cmake .. -DCMAKE_BUILD_TYPE=Debug
  - make

env:
  global:
   - secure: "hAYJZlldcmNTRgs+Jduw0nrFeNTeF/3u/TejSMbyIQ0Kd7/o0keTJGKWyCGIgslz1zzC13sePZ7cd54Mcwp//OV8XZSV3aHcjhbbxm+9YZBuewMBg0K9M8fSQh1W9b/bDdy+so1tP//NUwHF8a5YI+iJt0fmrjrOYva3U2bDubk="

addons:
  coverity_scan:
    project:
      name: "crocs-muni/eacirc"
      description: "Build submitted via Travis CI"
    notification_email: novotng@gmail.com
    build_command_prepend: mkdir -p build && cd build && cmake .. -DCMAKE_BUILD_TYPE=Release
    build_command: make
branch_pattern: coverity_scan
